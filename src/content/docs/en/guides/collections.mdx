---
title: Collections
description: >-
  Learn about Astro's content collections.
i18nReady: true
---
import { FileTree } from '@astrojs/starlight/components';
import Since from '~/components/Since.astro'
import RecipeLinks from "~/components/RecipeLinks.astro"
import Badge from "~/components/Badge.astro"

<p><Since v="2.0.0" /></p>

**Content collections** are the best way to manage sets of content in any Astro project. Collections help to organize and query your documents, validate your metadata, and provide automatic TypeScript type-safety for all of your content.

Astro v5.0 introduced the Content Layer API for querying content collections. This performant, scalable API provides built-in content loaders for your local collections, and use third-party or community loaders to fetch remote content. You can even create your own custom loader and pull in your data from any source.

:::note
Projects may continue using the legacy Content Collections API introduced in Astro v2.0. However, we encourage you to [update any existing collections](#migrating-from-an-existing-collection) when you are able.
:::

## What are Content Collections?

You can define a **collection** from a set of data that is structurally similar. This can be a directory of blog posts, a JSON file of product items, or any data that represents multiple items of the same shape.

Collections stored locally in your project or on your filesystem can have entries of Markdown, MDX, Markdoc, or JSON files:

<FileTree>
- src/
  - **newsletter/** the "newsletter" collection
    - week-1.md a collection entry
    - week-2.md a collection entry
    - week-3.md a collection entry
  - **authors/** the "author" collection
    - authors.json a single file containing all collection entries
</FileTree>

With an appropriate collection loader, you can fetch remote data from any external source, such as a CMS, database, or headless payment system.

## When to create a collection

You can [create a collection](/en/guides/defining-collections/) any time you have a group of related data or content that shares a common structure.

Much of the benefit of using collections comes from:

- Defining a common data shape to validate that an individual entry is "correct" or "complete", avoiding errors in production.
- Content-focused APIs designed to make querying intuitive (e.g. `getCollection()` instead of `import.meta.glob()`).
- A Loader API for retrieving your content that provides both built-in loaders and access to the low-level API. There are several third-party and community-built loaders available, and you can build your own custom loader to fetch data from anywhere.
- Performance and scalability. The Content Layer API allows data to be cached between builds and is suitable for tens of thousands of content entries.

[Define your data](/en/guides/defining-collections/) as a collection when:

- You have multiple files or data to organize that share the same overall structure (e.g. blog posts written in Markdown).
- You have existing content stored remotely, such as in a CMS, and want to take advantage of the Content Layer API instead of relying on `fetch()` or SDKs.
- You need to fetch (tens of) thousands of related pieces of data, and need a querying method that handles at scale.

### When not to create a collection

Collections provide excellent structure, safety, and organization when you have multiple pieces of content that must share the same properties.

Collections may not be your solution if:

- You have only one or a small number of pages. Consider [making individual page components](/en/basics/astro-pages/) at `src/pages/my-page.astro` instead.
- Your data is not stored in a supported format, such as TOML. Use other methods of [importing files](/en/guides/imports/#import-statements) or [fetching data](/en/guides/data-fetching/) instead.
- You are displaying files that should not be processed by Astro, such as PDFs. Place these static assets in the [`public/` directory](/en/basics/project-structure/#public) of your project instead.

## Updating an existing project to use the Content Layer API

### Migrating from an existing collection

You can convert an existing content collection with Markdown, MDX, Markdoc, or JSON entries to use the Content Layer API.

1. **Move the collection folder out of `src/content/`** (e.g. to `src/data/`). All collections located in the `src/content/` folder will use the existing Content Collections API.

    **Do not move the existing `src/content/config.ts` file**. This file will define all collections, using either API.

2. **Edit the collection definition**. Your updated collection requires a `loader`, and the option to select a collection `type` is no longer available.

    ```ts ins={3,8} del={7}
    // src/content/config.ts
    import { defineCollection, z } from 'astro:content';
    import { glob } from 'astro/loaders';

    const blog = defineCollection({
      // For content layer you no longer define a `type`
      type: 'content',
      loader: glob({ pattern: '**\/[^_]*.md', base: "./src/data/blog" }),
      schema: z.object({
        title: z.string(),
        description: z.string(),
        pubDate: z.coerce.date(),
        updatedDate: z.coerce.date().optional(),
      }),
    });
    ```

3. **Change references from `slug` to `id`**. Content layer collections do not have a `slug` field. Instead, all updated collections will have an `id`.

    ```astro ins={7} del={6}
    // src/pages/index.astro
    ---
    export async function getStaticPaths() {
      const posts = await getCollection('blog');
      return posts.map((post) => ({
        params: { slug: post.slug },
        params: { slug: post.id },
        props: post,
      }));
    }
    ---
    ```

4. **Switch to the new `render()` function**. Entries no longer have a `render()` method, as they are now serializable plain objects. Instead, import the `render()` function from `astro:content`.

    ```astro ins={4,9} del={3,8}
    // src/pages/index.astro
    ---
    import { getEntry } from 'astro:content';
    import { getEntry, render } from 'astro:content';

    const post = await getEntry('blog', params.slug);

    const { Content, headings } = await post.render();
    const { Content, headings } = await render(post);
    ---

    <Content />
    ```

### Migrating from File-Based Routing

If you have an existing Astro project, such as a blog, that uses Markdown or MDX files in subfolders inside `src/pages/`, consider migrating related content or data files to content collections. 
 
See how to convert a basic blog example from `src/pages/posts/` to `src/content/posts` in our [step-by-step tutorial](/en/tutorials/add-content-collections/) that uses the codebase from [the Build a Blog tutorial's finished project](https://github.com/withastro/blog-tutorial-demo).